# **Lecture 7 剩余知识点深度详解**

## **1. 搜索算法扩展应用**
### **1.1 搜索失败处理**
- **顺序搜索**：遍历完所有元素后返回`NULL`或特定错误码
- **二分搜索**：当`low > high`时终止循环，返回未找到标志
```python
# 二分搜索失败案例
[1, 3, 5, 7]中搜索4：
low=0, high=3 → mid=1 (3<4) → low=2
low=2, high=3 → mid=2 (5>4) → high=1
终止：low(2) > high(1)
```

### **1.2 边界条件分析**
- **空数组处理**：
  - 顺序搜索：立即返回`NULL`
  - 二分搜索：首次循环条件`low(0) <= high(-1)`不成立
- **重复元素处理**：
  - 二分搜索不保证返回第一个/最后一个匹配项（需修改算法）

## **2. 哈希表深度解析**
### **2.1 开放寻址法的变体**
| 探测方法      | 公式                     | 优点                  | 缺点                  |
|---------------|--------------------------|-----------------------|-----------------------|
| **线性探测**  | `(hash(key) + i) % size` | 缓存友好              | 易产生聚集(clustering)|
| **平方探测**  | `(hash(key) + i²) % size`| 减少聚集              | 可能导致探测不全      |
| **双重哈希**  | `(hash1(key) + i*hash2(key)) % size` | 分布最均匀 | 计算成本高            |

### **2.2 装载因子(Load Factor)**
- **定义**：`α = n/m`（n=元素数，m=哈希表大小）
- **临界值**：
  - 开放寻址法：通常α < 0.7
  - 链式哈希：α可>1（但链表过长会退化性能）
- **动态扩容**：当α超过阈值时，新建更大哈希表并重新哈希所有元素

### **2.3 哈希函数进阶设计**
**理想特性**：
1. **确定性**：相同键始终产生相同哈希值
2. **均匀性**：键均匀分布在整个表空间
3. **混淆性**：相似键产生完全不同哈希值

**经典哈希函数**：
```python
# DJB2哈希（适合字符串）
def djb2_hash(s):
    hash_value = 5381
    for c in s:
        hash_value = ((hash_value << 5) + hash_value) + ord(c)
    return hash_value % table_size
```

## **3. 从搜索到实际系统**
### **3.1 数据库索引实现**
- **B+树**：平衡多路搜索树，结合二分查找与磁盘I/O优化
  - 内部节点存储键值（不存数据）
  - 叶子节点通过链表连接（支持范围查询）
- **哈希索引**：适用于等值查询（如Redis）

### **3.2 缓存系统应用**
- **LRU缓存**：哈希表+双向链表
  - 哈希表实现O(1)访问
  - 链表维护访问顺序

## **4. 复杂度对比的数学基础**
### **4.1 二分搜索递归关系**
- 递推式：`T(n) = T(n/2) + O(1)`
- 解：通过主定理得`O(log n)`

### **4.2 哈希表概率分析**
- 成功查找平均探测次数：`1/(1-α)`（开放寻址法）
- 链式哈希平均链表长度：`α`

## **5. 考试陷阱与解题技巧**
### **5.1 高频易错点**
1. **二分搜索边界错误**：
   - 错误：`while low < high`（可能漏查最后一个元素）
   - 正确：`while low <= high`
2. **哈希表删除陷阱**：
   - 开放寻址法中直接置空会导致查找链断裂

### **5.2 典型考题解析**
**题目**：设计哈希表处理1000个学生记录，预期最多冲突5次，求最小表大小。

**解答步骤**：
1. 设表大小为m，装载因子α=1000/m
2. 根据冲突概率公式（如泊松分布），求解满足P(冲突>5)<阈值的最小m
3. 实际工程中通常选择大于1000的质数（如1009）

## **6. 可视化辅助理解**
### **6.1 二分搜索过程演示**
```
搜索7 in [3,6,7,11,32,33,53]：
Step1: mid=3 (11) → 7<11 → 左半[3,6,7]
Step2: mid=1 (6) → 7>6 → 右半[7]
Step3: mid=2 (7) → 找到
```

### **6.2 哈希冲突解决对比**
```
线性探测：
插入键A(哈希值=2), B(哈希值=2)：
[ , , A, B, , , ]

链式哈希：
2 → A → B
```

## **7. 扩展思考**
### **7.1 现代硬件的影响**
- **CPU缓存**：线性探测因局部性好可能比链式更快
- **SIMD指令**：可加速顺序搜索（并行比较）

### **7.2 分布式哈希表(DHT)**
- **一致性哈希**：解决节点动态增减问题
- **Chord算法**：O(log n)跳转的分布式查找

## **总结 Checklist**
- [ ] 掌握顺序搜索的失败处理与边界条件
- [ ] 理解二分搜索的递归数学本质
- [ ] 能比较不同哈希冲突解决方案
- [ ] 会计算装载因子并理解其影响
- [ ] 熟悉哈希函数设计原则
- [ ] 了解实际系统中的应用场景
- [ ] 能分析算法复杂度背后的数学原理
- [ ] 警惕常见实现陷阱
